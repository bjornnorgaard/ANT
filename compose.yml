services:

  todos-api:
    image: ursu/ant-todos-api:latest
    build:
      context: src
      dockerfile: ../dockerfiles/todos.Dockerfile
    ports:
      - "6001:8080"
    env_file:
      - .env
    depends_on:
      - mssqlserver

  mssqlserver:
    image: mcr.microsoft.com/mssql/server:2022-latest
    ports:
      - "1433:1433"
    environment:
      MSSQL_SA_PASSWORD: "yourStrong(!)Password"
      ACCEPT_EULA: "Y"
    volumes:
      - ./volumes/mssqlserver/mssql/data:/var/opt/mssql/data
      - ./volumes/mssqlserver/sqlserver:/var/opt/mssqlserver

  aspire-dashboard:
    image: mcr.microsoft.com/dotnet/nightly/aspire-dashboard:8.0.0-preview.6
    ports:
      - "18888:18888"
      - "4317:18889"
